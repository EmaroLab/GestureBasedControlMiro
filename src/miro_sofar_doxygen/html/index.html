<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gesture-Based Control of MiRo: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gesture-Based Control of MiRo
   </div>
   <div id="projectbrief">The user can guide MiRo using a wearable device, a swartwatch with a 9-axis imu sensor.  The Robot can override the user&#39;s command when an obstacle is detected to avoid collision.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Gesture-Based Control of MiRo Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="aim_sec"></a>
The aim of the Project</h1>
<p class="">The aim of the project is to control the bio-inspired social Robot MiRo with a wearable device. In particular a smartwatch with a 9-axis Imu sensor. <br />
 The Robot should also be able to avoid collision with obstacle and override the user's control when an obstacle is detected. <br />
 This Project has been developed for the Software Architecture course of the master degree program in Robotics Engineering at University of Genoa. </p>
<h1><a class="anchor" id="sofar_sec"></a>
The Software architecture</h1>
<p class="">The software architecture developed for this project is based on a bio-inspired approach. <br />
 The problem has been addressed by using a behaviour-based design pattern. <br />
 ADD IMAGE <br />
 This architecture has been developed to be modular and scalable, since each behavior can be conveniently modified or substituted, and new behaviours can be easily added. <br />
 There are two possible MiRo behaviors addressed in this project: </p><ul>
<li>
Gesture Based behavior </li>
<li>
Obstacle Avoidance behavior</li>
</ul>
<h2><a class="anchor" id="gbb_sec"></a>
Gesture Based Behavior</h2>
<p class="">The <b>Gesture Based behavior</b> regards the robot's ability to follow the user's command. <br />
 Hence, the data from the smartwatch's accelerometer are converted into input for MiRo control. <br />
 In particular, depending on the accelerometer values are set some specific lights pattern of Miro's body and Miro's body linear and angular velocities. <br />
 Two modalities of control are available: <em>BASIC</em> and <em>ADVANCED</em> </p><ul>
<li>
The <em>BASIC</em> mode is basically a step control that allows Miro to stay still, rotate left/right, go straight forward/backward only. <br />
 This mode allows a novice user to start getting comfortable with the control gestures and with the Robot responsiveness. </li>
<li>
The <em>ADVANCED</em> mode allows a smoother but more sensitive control, enabling combination of basic commands. e.g turn left and go forward <br />
 This mode allows an expert user to perform more complex trajectories and to exert a more natural control.</li>
</ul>
<h2><a class="anchor" id="aob_sec"></a>
Obstacle Avoidance Behavior</h2>
<p class="">The <b>Obstacle Avoidance behavior</b> overrides the Gesture Based behavior when and obstacle is detected by using the Robot's Sonar. <br />
 When an Obstacle is detected the Robot's body becomes red to signal the dangerous situation to the user. It starts turning of few degrees until the obstacle is not detected anymore. <br />
 But, before this the user must suggest the robot in wich direction turning. Once the collision has been avoided the control goes back to the user. </p><div class="image">
<img src="sofar_architecture.png" alt="sofar_architecture.png"/>
</div>
 <h1><a class="anchor" id="det_sec"></a>
The implementation</h1>
<p class="">The Robot Miro presents itself as a ROS node. <br />
 Each module of the architecture has been implemente as a ROS node. <br />
 For comunication between the nodes has been used a Publish/Subscibe messaging pattern. <br />
 The behavior have been implemented through a miro_msg of type <a href="https://consequential.bitbucket.io/platform_control.msg">platform_control</a> <br />
 In particular, each behavior sets the body_vel (Miro Body's velocity) and lights_raw (Miro Body's lightening pattern) </p>
<h2><a class="anchor" id="sum_dec"></a>
Summary on nodes' functioning</h2>
<p class="">In the File and Class documentation is provided a more deailed description about all the nodes. <br />
 <br />
 In order to allow the smartwatch to communicate with the ROS Master, the <a href="https://github.com/EmaroLab/imu_stream">imu_stream</a> app must be installed on both smartwatch and smartphone paired. <br />
 The imu_stream is used to stream IMU data from smartwatch to an MQTT broker. <br />
 The <a href="https://github.com/EmaroLab/mqtt_ros_bridge/tree/feature/multiple_smartwatches">mqtt_ros_bridge</a> is a bridge that allows to subscribe to MQTT topics and publish contents of MQTT messages to ROS. <br />
 <br />
 The <a class="el" href="imu__data__map_8py.html" title="The node imu_data_map.py subscribes to the smartwatch&#39;s accelerometer data and publish the linear and...">imu_data_map.py</a> node subscribes to the smartwatchâ€™s accelerometer data, maps the linear accelerations into linear and angular velocities and publish them. <br />
 The <a class="el" href="gbb__miro_8py.html" title="The node gbb_miro.py subscribes to the linear and angular velocity mapped in the imu_data_map node an...">gbb_miro.py</a> node uses these velocities to publish a message of type platform_control. <br />
 The <a class="el" href="oab__miro_8py.html" title="The node oab_miro.py subscribes to the sonar and check the presence of an obstacle   If the obstacle ...">oab_miro.py</a> node subscribes to sonar sensor to detect the presence of an obstacle, and publish a message of type platform_control that contains Miro's body velocity and Miro's body lights pattern. <br />
 The <a class="el" href="switching__behavior__miro_8py.html" title="The node switching_behavior_miro.py allows to switch from the gesture based behaviour published by th...">switching_behavior_miro.py</a> node subscribes to both platform_control messages published by <a class="el" href="gbb__miro_8py.html" title="The node gbb_miro.py subscribes to the linear and angular velocity mapped in the imu_data_map node an...">gbb_miro.py</a> and <a class="el" href="oab__miro_8py.html" title="The node oab_miro.py subscribes to the sonar and check the presence of an obstacle   If the obstacle ...">oab_miro.py</a> that corresponds to the two different behaviors. <br />
 It decides which behavior to publish on the Robot depending on the presence or not of the obstacle. </p>
<h1><a class="anchor" id="hiw_sec"></a>
How to run the code</h1>
<p class="">The code, the instructions about prerequisites and how to run the installation can be found on <a href="https://github.com/RobertaDelrio/GestureBasedControlMiro">GitHub</a> </p>
<h1><a class="anchor" id="team_sec"></a>
The Team</h1>
<p class="">Roberta Delrio: <em><a href="#" onclick="location.href='mai'+'lto:'+'rob'+'er'+'ta.'+'de'+'lri'+'o@'+'stu'+'di'+'o.u'+'ni'+'bo.'+'it'; return false;">rober<span style="display: none;">.nosp@m.</span>ta.d<span style="display: none;">.nosp@m.</span>elrio<span style="display: none;">.nosp@m.</span>@stu<span style="display: none;">.nosp@m.</span>dio.u<span style="display: none;">.nosp@m.</span>nibo<span style="display: none;">.nosp@m.</span>.it</a></em> <br />
 Sabrina Speranza: <em><a href="#" onclick="location.href='mai'+'lto:'+'sab'+'ri'+'na.'+'sp'+'era'+'nz'+'a.s'+'s.'+'@gm'+'ai'+'l.c'+'om'; return false;">sabri<span style="display: none;">.nosp@m.</span>na.s<span style="display: none;">.nosp@m.</span>peran<span style="display: none;">.nosp@m.</span>za.s<span style="display: none;">.nosp@m.</span>s.@gm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a></em> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
